import{S as z,i as S,s as W,e as v,a as L,b as _,c as y,d as X,l as m,n as Y,f as M,r as A,g as J,o as ee,h as j,t as H,j as w,k as I,p as te,m as ne,q as se,u as oe,v as $,w as le,x as re,y as ie,z as T,A as C,B as Q,C as O,D as P,E as ae,F as V,G as q,H as ue}from"./vendor.js";const ce=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const t of a.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&i(t)}).observe(document,{childList:!0,subtree:!0});function o(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=o(s);fetch(s.href,a)}};ce();function fe(r){let e,o,i,s,a;return{c(){e=v("canvas"),o=L(),i=v("input"),_(i,"type","color"),_(i,"aria-label","color"),_(i,"class","absolute")},m(t,n){y(t,e,n),r[7](e),y(t,o,n),y(t,i,n),X(i,r[1].color),s||(a=[m(e,"mousedown",r[2]),m(e,"touchstart",r[2]),m(e,"mouseup",r[3]),m(e,"touchend",r[3]),m(e,"mouseout",r[3]),m(e,"touchcancel",r[3]),m(e,"mousemove",r[8]),m(e,"touchmove",r[9]),m(e,"resize",r[5]),m(i,"input",r[10])],s=!0)},p(t,[n]){n&2&&X(i,t[1].color)},i:Y,o:Y,d(t){t&&M(e),r[7](null),t&&M(o),t&&M(i),s=!1,A(a)}}}function G(r,e){let o=new Date().getTime();return function(){let i=new Date().getTime();i-o>=e&&(o=i,r.apply(null,arguments))}}function ge(r,e,o){let i=J(),s,a=!1,t,n={color:"#000000"};const f=c=>{let E=s.width,k=s.height;l(c.x0*E,c.y0*k,c.x1*E,c.y1*k,c.color),console.log("event received")};function p(c){a=!0,o(1,n.x=c.clientX||c.touches[0].clientX,n),o(1,n.y=c.clientY||c.touches[0].clientY,n)}function h(c){!a||(a=!1,l(n.x,n.y,c.clientX||c.touches[0].clientX,c.clientY||c.touches[0].clientY,n.color,!0))}function u(c){!a||(l(n.x,n.y,c.clientX||c.touches[0].clientX,c.clientY||c.touches[0].clientY,n.color,!0),o(1,n.x=c.clientX||c.touches[0].clientX,n),o(1,n.y=c.clientY||c.touches[0].clientY,n))}function l(c,E,k,B,F,x){if(t.beginPath(),t.moveTo(c,E),t.lineTo(k,B),t.strokeStyle=F,t.lineWidth=2,t.stroke(),t.closePath(),!x)return;let N=s.width,U=s.height;i("drawing",{x0:c/N,y0:E/U,x1:k/N,y1:B/U,color:F})}function d(){o(0,s.width=window.innerWidth,s),o(0,s.height=window.innerHeight,s)}ee(()=>{t=s.getContext("2d"),window.addEventListener("resize",d,!1),d()});function g(c){j[c?"unshift":"push"](()=>{s=c,o(0,s)})}const b=c=>G(u(c),10),D=c=>G(u(c),10);function Z(){n.color=this.value,o(1,n)}return[s,n,p,h,u,d,f,g,b,D,Z]}class pe extends z{constructor(e){super();S(this,e,ge,fe,W,{onDrawingEvent:6})}get onDrawingEvent(){return this.$$.ctx[6]}}function K(r,e,o){const i=r.slice();return i[2]=e[o],i}function R(r){let e,o=r[2].user.substr(0,5)+"",i,s,a=r[2].message+"",t;return{c(){e=v("li"),i=H(o),s=H(": "),t=H(a),_(e,"class","bg-fade rounded p-1 m-2")},m(n,f){y(n,e,f),w(e,i),w(e,s),w(e,t)},p(n,f){f&1&&o!==(o=n[2].user.substr(0,5)+"")&&I(i,o),f&1&&a!==(a=n[2].message+"")&&I(t,a)},d(n){n&&M(e)}}}function de(r){let e,o,i,s,a,t,n,f,p,h=r[0],u=[];for(let l=0;l<h.length;l+=1)u[l]=R(K(r,h,l));return{c(){e=v("div"),o=v("div"),o.innerHTML='<h4 class="pl-4 pr-8 py-2">Chat</h4>',i=L(),s=v("ul");for(let l=0;l<u.length;l+=1)u[l].c();a=L(),t=v("form"),n=v("input"),_(o,"class","bg-primary rounded-t flex justify-between gap-2"),_(s,"class","bg-white p-2 max-h-72 overflow-auto"),_(n,"type","text"),_(n,"placeholder","Type Message"),_(n,"class","rounded border border-fade outline-fade flex-1 px-2 text-primary"),_(n,"aria-label","Message"),_(t,"class","bg-white p-1 flex")},m(l,d){y(l,e,d),w(e,o),w(e,i),w(e,s);for(let g=0;g<u.length;g+=1)u[g].m(s,null);r[5](s),w(e,a),w(e,t),w(t,n),X(n,r[2]),f||(p=[m(n,"input",r[6]),m(t,"submit",te(r[3]))],f=!0)},p(l,[d]){if(d&1){h=l[0];let g;for(g=0;g<h.length;g+=1){const b=K(l,h,g);u[g]?u[g].p(b,d):(u[g]=R(b),u[g].c(),u[g].m(s,null))}for(;g<u.length;g+=1)u[g].d(1);u.length=h.length}d&4&&n.value!==l[2]&&X(n,l[2])},i:Y,o:Y,d(l){l&&M(e),ne(u,l),r[5](null),f=!1,A(p)}}}function he(r,e,o){let i=J(),s=[],a="";const t=l=>{s.push(l),o(0,s)},n=()=>{a.length>0&&(s.push({user:"Me",message:a}),i("message",a),o(2,a=""),o(0,s))},f=async l=>{l.scroll({top:l.scrollHeight,behavior:"smooth"})};let p;se(()=>{p&&f(p)});function h(l){j[l?"unshift":"push"](()=>{p=l,o(1,p)})}function u(){a=this.value,o(2,a)}return r.$$.update=()=>{r.$$.dirty&3&&p&&s&&f(p)},[s,p,a,n,t,h,u]}class me extends z{constructor(e){super();S(this,e,he,de,W,{newMessage:4})}get newMessage(){return this.$$.ctx[4]}}function _e(r){let e,o,i,s;const a=r[6].default,t=oe(a,r,r[5],null);return{c(){e=v("section"),t&&t.c(),$(e,"left",r[0]+"px"),$(e,"top",r[1]+"px"),_(e,"class","draggable svelte-jzvapm")},m(n,f){y(n,e,f),t&&t.m(e,null),o=!0,i||(s=[m(window,"mouseup",r[4]),m(window,"mousemove",r[3]),m(e,"mousedown",r[2])],i=!0)},p(n,[f]){t&&t.p&&(!o||f&32)&&le(t,a,n,n[5],o?ie(a,n[5],f,null):re(n[5]),null),(!o||f&1)&&$(e,"left",n[0]+"px"),(!o||f&2)&&$(e,"top",n[1]+"px")},i(n){o||(T(t,n),o=!0)},o(n){C(t,n),o=!1},d(n){n&&M(e),t&&t.d(n),i=!1,A(s)}}}function we(r,e,o){let{$$slots:i={},$$scope:s}=e,{left:a=100}=e,{top:t=100}=e,n=!1;function f(){n=!0}function p(u){n&&(o(0,a+=u.movementX),o(1,t+=u.movementY))}function h(){n=!1}return r.$$set=u=>{"left"in u&&o(0,a=u.left),"top"in u&&o(1,t=u.top),"$$scope"in u&&o(5,s=u.$$scope)},[a,t,f,p,h,s,i]}class ve extends z{constructor(e){super();S(this,e,we,_e,W,{left:0,top:1})}}function be(r){let e,o,i;function s(t){r[6](t)}let a={};return r[1]!==void 0&&(a.newMessage=r[1]),e=new me({props:a}),j.push(()=>Q(e,"newMessage",s)),e.$on("message",r[7]),{c(){O(e.$$.fragment)},m(t,n){P(e,t,n),i=!0},p(t,n){const f={};!o&&n&2&&(o=!0,f.newMessage=t[1],V(()=>o=!1)),e.$set(f)},i(t){i||(T(e.$$.fragment,t),i=!0)},o(t){C(e.$$.fragment,t),i=!1},d(t){q(e,t)}}}function ye(r){let e,o,i,s,a,t,n,f,p;function h(l){r[4](l)}let u={};return r[0]!==void 0&&(u.onDrawingEvent=r[0]),i=new pe({props:u}),j.push(()=>Q(i,"onDrawingEvent",h)),i.$on("drawing",r[5]),t=new ve({props:{$$slots:{default:[be]},$$scope:{ctx:r}}}),{c(){e=v("main"),o=v("section"),O(i.$$.fragment),a=L(),O(t.$$.fragment),_(o,"class","flex sm:flex-row flex-1 w-full"),_(e,"class","flex flex-col h-screen w-screen bg-fade relative")},m(l,d){y(l,e,d),w(e,o),P(i,o,null),w(o,a),P(t,o,null),n=!0,f||(p=ae(r[3].call(null,window,{scrollable:Me})),f=!0)},p(l,[d]){const g={};!s&&d&1&&(s=!0,g.onDrawingEvent=l[0],V(()=>s=!1)),i.$set(g);const b={};d&514&&(b.$$scope={dirty:d,ctx:l}),t.$set(b)},i(l){n||(T(i.$$.fragment,l),T(t.$$.fragment,l),n=!0)},o(l){C(i.$$.fragment,l),C(t.$$.fragment,l),n=!1},d(l){l&&M(e),q(i),q(t),f=!1,p()}}}let Me=!1;function De(r,e,o){"serviceWorker"in navigator&&navigator.serviceWorker.register("/serviceWorker.js").then(()=>console.log("Service worker registered!")).catch(l=>console.error("Failed to register service worker",l));const i=ue(),s=(l,d)=>i.emit(l,d);let a;i.on("drawing",l=>a(l));let t;i.on("message",l=>t(l));const n=(l,d)=>{let{scrollable:g}=d;const b=D=>{g||D.preventDefault()};return l.addEventListener("wheel",b,{passive:!1}),{update(D){g=D.scrollable},destroy(){l.removeEventListener("wheel",b,{passive:!1})}}};function f(l){a=l,o(0,a)}const p=l=>s("drawing",l.detail);function h(l){t=l,o(1,t)}return[a,t,s,n,f,p,h,l=>s("message",l.detail)]}class Ee extends z{constructor(e){super();S(this,e,De,ye,W,{})}}new Ee({target:document.getElementById("app")});
